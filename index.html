<!DOCTYPE html>

<script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
        crossorigin="anonymous">
</script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" />

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Living at WSU Forecast</title>
    <style>
        th{
            color:#fff;
        }
    </style>
</head>
<body>
    <h1 class="dc-title">Forecast for Living at WSU</h1>
    <ul class="dc-title"></ul>

    <table class="table table-striped" >
        <tr class="bg-info">
            <th>Total Number of Forecasts</th>
            <th>Average Temp (F)</th>
        </tr>

        <tbody id="summaryTable">

        </tbody>
    </table>

    <div></div>

    <table class="table table-striped" id="table1">
        <tr class="bg-info">
            <th>Date</th>
            <th>Temperature (F)</th>
            <th>Summary</th>
        </tr>

        <tbody id="table1Body">

        </tbody>
    </table>

    <div id="div2"></div>

    <script>

        fetch("Homework.JSON")
            .then(response => response.json())
            .then(data => {
                var myArray = data

                buildTable(myArray)

                function buildTable(tableData) {
                    var table = document.getElementById('table1Body')
                    var averageTemp = 0
                    var summaryArray = []

                    //loop through array, making rows one by one
                    for (let i = 0; i < tableData.length; i++) {

                        //Make date clear to read
                        var reportedDate = tableData[i].date
                        var dateParse = reportedDate.substring(0, 10)
                        let dateOutput = new Date(dateParse).toLocaleDateString()

                        //Add all temps within loop. Divide by total number outside of loop to get average.
                        //var averageTemp = averageTemp + tableData[i].temperatureF
                        averageTemp = averageTemp + tableData[i].temperatureF

                        //Count Summaries to determine most common

                        //concatonate rows for the table
                        var row = ` <tr>
                                       <td>${dateOutput}</td>
                                        <td>${tableData[i].temperatureF}</td> 
                                        <td>${tableData[i].summary}</td> 
                                    </tr>`
                        //append data to table
                        table.innerHTML += row
                    }

                    averageTemp = averageTemp / tableData.length
                    console.log(averageTemp)
                    table = document.getElementById('summaryTable')
                    row = ` <tr>
                                <td>${tableData.length}</td>
                                <td>${averageTemp}</td>
                            </tr>`
                    table.innerHTML += row
                }

            })

                  

    </script>

    

</body>
</html>